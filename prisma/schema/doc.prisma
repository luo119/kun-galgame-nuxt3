model doc_category {
    id          Int    @id @default(autoincrement())
    slug        String @unique @db.VarChar(128)
    title       String @db.VarChar(233)
    description String @default("") @db.VarChar(777)
    icon        String @default("") @db.VarChar(128)
    sort_order  Int    @default(0)

    article doc_article[]

    created DateTime @default(now())
    updated DateTime @updatedAt
}

model doc_tag {
    id          Int    @id @default(autoincrement())
    slug        String @unique @db.VarChar(128)
    title       String @db.VarChar(128)
    description String @default("") @db.VarChar(255)

    article doc_article_tag_relation[]

    created DateTime @default(now())
    updated DateTime @updatedAt
}

model doc_article {
    id             Int       @id @default(autoincrement())
    title          String    @db.VarChar(233)
    slug           String    @unique @db.VarChar(233)
    path           String    @unique @db.VarChar(255)
    description    String    @db.VarChar(777)
    banner         String    @default("") @db.VarChar(777)
    // 0 - draft, 1 - published, 2 - archived
    status         Int       @default(1)
    is_pin         Boolean   @default(false)
    reading_minute Int       @default(0)
    view           Int       @default(0)
    published_time DateTime  @default(now())
    edited_time    DateTime?

    content_markdown String @db.VarChar(100007)

    category_id Int
    category    doc_category @relation(fields: [category_id], references: [id], onDelete: Cascade)

    author_id Int
    author    user @relation(fields: [author_id], references: [id], onDelete: Cascade)

    tags doc_article_tag_relation[]

    created DateTime @default(now())
    updated DateTime @updatedAt
}

model doc_article_tag_relation {
    doc_article_id Int
    doc_article    doc_article @relation(fields: [doc_article_id], references: [id], onDelete: Cascade)
    doc_tag_id     Int
    doc_tag        doc_tag     @relation(fields: [doc_tag_id], references: [id], onDelete: Cascade)

    created DateTime @default(now())
    updated DateTime @updatedAt

    @@id([doc_article_id, doc_tag_id])
}
